(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{435:function(t,e,a){"use strict";a.r(e);var n=a(40),o=Object(n.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"laboratory-work"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#laboratory-work"}},[t._v("#")]),t._v(" Laboratory Work")]),t._v(" "),a("p",[t._v("On this page you find information about the examination test "),a("code",[t._v("Laboratory Work")]),t._v(".")]),t._v(" "),a("CompactInfo",{attrs:{infoPieces:{"Number of credits":"1.5",Grades:["Fail","Pass"],"How to work":"Individually",Goal:"To learn the basics in Android Development.",Instructions:"Complete and present your solution to the lab described on this page to a teacher at a lab session.",Help:"Ask the teacher for help at the lab sessions."}}}),t._v(" "),a("h2",{attrs:{id:"installing-required-software"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installing-required-software"}},[t._v("#")]),t._v(" Installing Required Software")]),t._v(" "),a("p",[t._v("In this course, we will only use Android Studio and the tools that come with it to create Android applications.")]),t._v(" "),a("h3",{attrs:{id:"on-the-school-s-computers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#on-the-school-s-computers"}},[t._v("#")]),t._v(" On the school's computers")]),t._v(" "),a("p",[a("strong",[t._v("If you work on a computer in E2404, E2432 or E2433")]),t._v(", all required software should already be installed for you, so no need to install anything yourself.")]),t._v(" "),a("p",[a("strong",[t._v("If you work on a school computer in any other room")]),t._v(", you need to manually install the required software through the "),a("em",[t._v("Software Center")]),t._v(" application (unless someone already has done that on the specific computer you are using).")]),t._v(" "),a("h3",{attrs:{id:"on-your-own-computer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#on-your-own-computer"}},[t._v("#")]),t._v(" On your own computer")]),t._v(" "),a("p",[a("strong",[t._v("If you work on your own private computer")]),t._v(", you need to download and install all required software yourself. In this course all required software is available for free for both Windows, Mac and Linux.")]),t._v(" "),a("p",[t._v("Just follow the instructions at "),a("a",{attrs:{href:"https://developer.android.com/studio/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://developer.android.com/studio/index.html"),a("OutboundLink")],1),t._v(" to download and install Android Studio.")]),t._v(" "),a("p",[t._v("To test the android applications you create, you need to run them on an Android device. If you have your own smartphone or tablet running Android you can use that one, just connect it to your computer using a USB cable.")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("For Windows users")]),t._v(" "),a("p",[t._v("On Windows you need to "),a("a",{attrs:{href:"https://developer.android.com/studio/run/oem-usb.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Install OEM USB drivers"),a("OutboundLink")],1),t._v(" to be able to install Android applications on your connected Android device.")])]),t._v(" "),a("p",[t._v("To more easily debug applications when they run on your own Android device, you need to "),a("a",{attrs:{href:"https://developer.android.com/studio/debug/dev-options.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Configure on-device developer options"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("p",[t._v("If you don't have your own Android device to run your Android applications on, you can use an Android emulator that comes with Android Studio. If the emulator has not automatically been configured to take advantage of VM acceleration when Android Studio was installed, we highly recommend you to configure it to take advantage of the speed improvements (so the emulator lag less) by "),a("a",{attrs:{href:"https://developer.android.com/studio/run/emulator-acceleration#accel-vm",target:"_blank",rel:"noopener noreferrer"}},[t._v("Configuring VM acceleration"),a("OutboundLink")],1),t._v(". This is a good idea even if you have a physical Android device to test on, because you probably want to test run your Android applications on different versions of Android, different screen sizes, etc., which is easy to do on an emulator, but impossible to do on a physical device.")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("For Windows users")]),t._v(" "),a("p",[t._v("Those of you taking the course "),a("RouterLink",{attrs:{to:"/courses/web-development-advanced-concepts/"}},[t._v("Web Development - Advanced Concepts")]),t._v(" will be using VM acceleration to run your Docker containers. If you do that in Windows Subsystem for Linux, then you can't use VM acceleration for your Android device in this course. If your computer runs Windows 10 Pro (and not Windows 10 Home), then you can use Hyper-V to enable VM acceleration for both Docker and Android. Read more about that on the following pages:")],1),t._v(" "),a("ul",[a("li",[t._v("Android: "),a("a",{attrs:{href:"https://developer.android.com/studio/run/emulator-acceleration#vm-windows-whpx",target:"_blank",rel:"noopener noreferrer"}},[t._v("Configure VM acceleration using Windows Hypervisor Platform"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("Docker: "),a("a",{attrs:{href:"https://docs.docker.com/docker-for-windows/troubleshoot/#virtualization",target:"_blank",rel:"noopener noreferrer"}},[t._v("Virtualization"),a("OutboundLink")],1)])])]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("Note!")]),t._v(" "),a("p",[t._v("Getting VM acceleration to work is sometimes hard. If the emulator for some reason can't use it, it's hard to debug the reason. For example, you might get the error message "),a("code",[t._v("This computer meets requirements for HAXM, but VT-x is not turned on")]),t._v(", and the problem could be that "),a("a",{attrs:{href:"https://stackoverflow.com/questions/21635504/error-during-installing-haxm-vt-x-not-working",target:"_blank",rel:"noopener noreferrer"}},[t._v("an antivirus program doesn't allow it to be used"),a("OutboundLink")],1),t._v(". Your development experience will be much better if you manage to enable VM acceleration, but it's probably not worth spending 20 hours on trying to get it to work.")])]),t._v(" "),a("p",[t._v("Android Studio often reads from and writes to many files, such as when you create a new Android Studio project or when you build your application. To be efficient, it's important that reading from and writing to files is fast. There are some known cases slowing down this process, such as:")]),t._v(" "),a("ul",[a("li",[t._v("Antivirus programs you have installed")]),t._v(" "),a("li",[t._v("Windows Defender")]),t._v(" "),a("li",[t._v("Windows File Indexing")])]),t._v(" "),a("p",[t._v("Nowadays Android Studio might install exceptions to these programs, improving the build performance, but if Android Studio is slow, you might want to investigate this.")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("For Windows users")]),t._v(" "),a("p",[t._v("You can often find out what's slowing down Android Studio by using the "),a("a",{attrs:{href:"https://www.howtogeek.com/108742/how-to-use-the-new-task-manager-in-windows-8/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Task Manager"),a("OutboundLink")],1),t._v(" to find the process that allocates much of your computer resources when Android Studio is slow, and then try to configure it to ignore Android Studio's folders. For example, see "),a("a",{attrs:{href:"https://stackoverflow.com/a/49336163/2104665",target:"_blank",rel:"noopener noreferrer"}},[t._v("configure Windows Defender and Windows File Indexing to ignore Android Studio folders"),a("OutboundLink")],1),t._v(".")])]),t._v(" "),a("p",[t._v("A fast CPU and an SDD instead of an HDD will of course also make Android Studio run faster as well; running Android Studio on a weak laptop usually gives you a very bad development experience.")]),t._v(" "),a("h2",{attrs:{id:"the-assignment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#the-assignment"}},[t._v("#")]),t._v(" The Assignment")]),t._v(" "),a("p",[t._v("The Graphical User Interface (GUI) for an Android application is to a large extent structured the same way as for a website (which you probably are acquaintance with).")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Website")]),t._v(" "),a("th",[t._v("Android application")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Consists of multiple webpages.")]),t._v(" "),a("td",[t._v("Consists of multiple activities.")])]),t._v(" "),a("tr",[a("td",[t._v("One webpage is shown at a time.")]),t._v(" "),a("td",[t._v("One activity is shown at a time.")])]),t._v(" "),a("tr",[a("td",[t._v("URIs are used to identify webpages.")]),t._v(" "),a("td",[t._v("Intents are used to identify activities.")])])])]),t._v(" "),a("p",[t._v('When designing the GUI for an Android application it is hence important to think of which activities it should consist of. Traditionally, websites have been designed to be used by desktop computers with a large screen, and it\'s not uncommon to see a webpage you can do multiple things on, such as a webpage with both a "sign in" form, a "sign up" form and a "I forgot my password" form.')]),t._v(" "),a("p",[t._v("Android applications on the other hand often run on devices with a small screen, and there's not enough room to display more than one functionality at a time. Hence one functionality per activity is a good guideline, which you should follow in this lab.")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),a("p",[t._v("With the introduction of fragments in Android API level 11 (Android 3), the guideline "),a("em",[t._v("One functionality per activity")]),t._v(" is not that accurate since an entire application can consist of a single activity that changes which fragments it's displaying, and each fragment provides a functionality of some kind. Hence, "),a("em",[t._v("One feature per screen")]),t._v(" might be a more accurate guideline.")])]),t._v(" "),a("p",[t._v("In this lab you should implement a simple ToDo app, in which users can create, view, edit and delete ToDo items. Start by creating a new project in Android Studio. To start easy, add an "),a("code",[t._v("Empty Activity")]),t._v(" initially, only support the latest version of Android and use Kotlin as your programming language (feel free to use Java if you want, but the code mentioned below on this page is Kotlin code).")]),t._v(" "),a("p",[t._v("A ToDo item will be represented using the "),a("code",[t._v("ToDo")]),t._v(" class shown in "),a("FigureNumber"),t._v(" below. That code can be put in a new Kotlin file named "),a("code",[t._v("Todo.kt")]),t._v(", or similar.")],1),t._v(" "),a("Figure",{attrs:{caption:"The ToDo class."}},[a("div",{staticClass:"language-kotlin extra-class"},[a("pre",{pre:!0,attrs:{class:"language-kotlin"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" XXX\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("data")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ToDo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Int"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" title"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" content"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("override")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" title\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("p",[t._v("The data in your application is optimally stored in the built in supported SQLite database, but to simplify this lab (which primarily is about using activities) we will instead store the ToDo items in a global variable as shown in "),a("FigureNumber"),t._v(" below.")],1),t._v(" "),a("Figure",{attrs:{caption:"The ToDo items are stored in a global variable."}},[a("div",{staticClass:"language-kotlin extra-class"},[a("pre",{pre:!0,attrs:{class:"language-kotlin"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" XXX\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Global variable used to store all ToDos.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" toDoRepository "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ToDoRepository")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Let's add two initial ToDos.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addToDo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Feed the pets"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Give the cat a fish and the dog a cat."')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addToDo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Exercise"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Take a walk and listen to music."')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" ToDoRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" toDos "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mutableListOf"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ToDo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addToDo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("title"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" content"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Int"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("when")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            toDos"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("count")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" toDos"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("last")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        toDos"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ToDo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            title"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            content\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" id\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAllToDos")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" toDos\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getToDoById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Int"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n        toDos"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            it"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" id\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteToDoById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Int"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n        toDos"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            toDos"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                it"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" id\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fun")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateToDoById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Int"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newTitle"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newContent"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getToDoById")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            title "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newTitle\n            content "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newContent\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("p",[t._v("Now we have the handling of the data in the application done, now we just need to build the graphical user interface on top of this to allow the user to see and modify the data. The final application should be as shown in "),a("FigureNumber"),t._v(" below.")],1),t._v(" "),a("Figure",{attrs:{caption:"Overview of the GUI."}},[a("p",[a("img",{attrs:{src:"static-files/laboratory-work-gui.jpeg",alt:"Overview of the GUI."}})])]),t._v(" "),a("p",[t._v("You should support at least 2 languages (English + another one), but the data (title and content of the ToDo items) will of course only be available in one language.")]),t._v(" "),a("h3",{attrs:{id:"mainactivity"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mainactivity"}},[t._v("#")]),t._v(" MainActivity")]),t._v(" "),a("p",[t._v("The "),a("code",[t._v("MainActivity")]),t._v(" should list the titles of all ToDo items and have a CREATE button. Clicking on one of the titles should start the "),a("code",[t._v("ViewToDoActivity")]),t._v(" that displays more information about the ToDo that was clicked (pass the id of the clicked ToDo item in the intent), and clicking on the CREATE button should start the "),a("code",[t._v("CreateToDoActivity")]),t._v(".")]),t._v(" "),a("p",[t._v("The layout for the "),a("code",[t._v("MainActivity")]),t._v(" can be a "),a("a",{attrs:{href:"https://developer.android.com/reference/android/support/constraint/ConstraintLayout",target:"_blank",rel:"noopener noreferrer"}},[t._v("ConstraintLayout"),a("OutboundLink")],1),t._v(" that displays a "),a("a",{attrs:{href:"https://developer.android.com/guide/topics/ui/controls/button",target:"_blank",rel:"noopener noreferrer"}},[t._v("Button"),a("OutboundLink")],1),t._v(" at the bottom of the layout and a "),a("a",{attrs:{href:"https://developer.android.com/reference/android/widget/ListView",target:"_blank",rel:"noopener noreferrer"}},[t._v("ListView"),a("OutboundLink")],1),t._v(" in the rest of the space above it. The "),a("code",[t._v("ListView")]),t._v(" will in turn display the title of each ToDo item. To do that, you can use code like the one shown "),a("FigureNumber"),t._v(" below in the Activity's "),a("code",[t._v("onCreate()")]),t._v(" (you need to add a "),a("code",[t._v("<ListView>")]),t._v(" to your layout with appropriate attributes).")],1),t._v(" "),a("Figure",{attrs:{caption:"Adding an ArrayAdapter to a ListView."}},[a("div",{staticClass:"language-kotlin extra-class"},[a("pre",{pre:!0,attrs:{class:"language-kotlin"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" listView "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" theActivity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("findViewById"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ListView"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("R"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("list_view"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nlistView"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("adapter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ArrayAdapter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("ToDo"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    aContext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    android"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("R"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("layout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("simple_list_item_1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    android"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("R"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    toDoRepository"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAllToDos")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),a("p",[t._v("Then you also need to register a click listener on the "),a("code",[t._v("listView")]),t._v(" for listening for clicks on the ToDo items in it.")]),t._v(" "),a("h3",{attrs:{id:"createtodoactivity"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#createtodoactivity"}},[t._v("#")]),t._v(" CreateToDoActivity")]),t._v(" "),a("p",[t._v("The "),a("code",[t._v("CreateToDoActivity")]),t._v(" should display a form through which the user can enter the title and content of a new ToDo item. When a new ToDo item has successfully been created the user should be taken to the "),a("code",[t._v("ViewToDoActivity")]),t._v(" displaying the ToDo item the user just created (pass the id of the newly created ToDo item in the intent).")]),t._v(" "),a("p",[t._v("You can use an "),a("a",{attrs:{href:"https://developer.android.com/reference/android/widget/EditText",target:"_blank",rel:"noopener noreferrer"}},[t._v("EditText"),a("OutboundLink")],1),t._v(" to let the user enter som text. You can then use the code in "),a("FigureNumber"),t._v(" below to read out what text the user has entered in the "),a("code",[t._v("EditText")]),t._v(".")],1),t._v(" "),a("Figure",{attrs:{caption:"Reading out the text the user has entered in an EditText."}},[a("div",{staticClass:"language-kotlin extra-class"},[a("pre",{pre:!0,attrs:{class:"language-kotlin"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" title "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" theActivity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("findViewById"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("EditText"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    R"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title_edit_text\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("editableText"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),a("p",[t._v("Add some kind of validation so the user can't add bad ToDo items, such as a ToDo item with a too short/long title/content. Display descriptive error messages to the user if something is invalid, e.g. change the text in a "),a("a",{attrs:{href:"https://developer.android.com/reference/android/widget/TextView",target:"_blank",rel:"noopener noreferrer"}},[t._v("TextView"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Listen for user typing")]),t._v(" "),a("p",[t._v("If you want to listen for when the user types something in an "),a("code",[t._v("EditText")]),t._v(" you can use a "),a("a",{attrs:{href:"https://developer.android.com/reference/android/text/TextWatcher",target:"_blank",rel:"noopener noreferrer"}},[t._v("TextWatcher"),a("OutboundLink")],1),t._v(". This way you can validate the input as the user types it (i.e. give immediate feedback), and, for example, disable the SAVE button when the input is invalid, and enable it when the input is valid.")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Make it more beautiful")]),t._v(" "),a("p",[t._v("Instead of using an "),a("code",[t._v("EditText")]),t._v(" you can use a "),a("a",{attrs:{href:"https://developer.android.com/reference/com/google/android/material/textfield/TextInputLayout.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("TextInputLayout"),a("OutboundLink")],1),t._v(" together with a "),a("code",[t._v("TextInputEditText")]),t._v(" to make it look a bit more beautiful.")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Improving back navigation")]),t._v(" "),a("p",[t._v("When the user has created a new ToDo item and ended up at the "),a("code",[t._v("ViewToDoActivity")]),t._v(" and then clicks on the back button, the user probably wants to end up at the "),a("code",[t._v("MainActivity")]),t._v(", and not at the "),a("code",[t._v("CreateToDoActivity")]),t._v(". To make that happen, you can in the "),a("code",[t._v("CreateToDoActivity")]),t._v(" call "),a("code",[t._v("finish()")]),t._v(" after you have started the "),a("code",[t._v("ViewToDoActivity")]),t._v(".")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("Updating the MainActivity")]),t._v(" "),a("p",[t._v("When the user navigates back to the "),a("code",[t._v("MainActivity")]),t._v(" after having created a new ToDo item, you need to tell the "),a("code",[t._v("ListView")]),t._v(" to re-render itself, since it's data source (the list with all ToDo items) has changed. You can do that by calling the "),a("a",{attrs:{href:"https://developer.android.com/reference/android/widget/ArrayAdapter.html#notifyDataSetChanged()",target:"_blank",rel:"noopener noreferrer"}},[t._v("notifyDataSetChanged()"),a("OutboundLink")],1),t._v(" method on your "),a("code",[t._v("ArrayAdapter")]),t._v(" in the "),a("code",[t._v("MainActivity")]),t._v("'s "),a("code",[t._v("onStart()")]),t._v(" method.")])]),t._v(" "),a("h3",{attrs:{id:"viewtodoactivity"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#viewtodoactivity"}},[t._v("#")]),t._v(" ViewToDoActivity")]),t._v(" "),a("p",[t._v("The "),a("code",[t._v("ViewToDoActivity")]),t._v(" should display all information about a ToDo item with a specific id. This activity should define the name of an extra argument that can be put in the Intent starting this activity, specifying the id of the ToDo item to display information about. This can be put in the class's companion object, as shown in "),a("FigureNumber"),t._v(" below.")],1),t._v(" "),a("Figure",{attrs:{caption:"A companion object that can be put inside a class."}},[a("div",{staticClass:"language-kotlin extra-class"},[a("pre",{pre:!0,attrs:{class:"language-kotlin"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("companion")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("object")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" EXTRA_TODO_ID "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TODO_ID"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("p",[t._v("The "),a("code",[t._v("ViewToDoActivity")]),t._v(" activity should also contain an UPDATE button and a DELETE button. Clicking on the UPDATE button should start the "),a("code",[t._v("UpdateToDoActivity")]),t._v(", where the user can change the title and content of the currently displayed ToDo item. Clicking on the DELETE button should display a dialog where the user can confirm the she wants to delete the ToDo item. To display the dialog, you can use the code shown in "),a("FigureNumber"),t._v(" below.")],1),t._v(" "),a("Figure",{attrs:{caption:"Code showing a dialog."}},[a("div",{staticClass:"language-kotlin extra-class"},[a("pre",{pre:!0,attrs:{class:"language-kotlin"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO: Don't hardcode strings in English.")]),t._v("\nAlertDialog"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Builder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("aContext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTitle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Delete ToDo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Do you really want to delete it?"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPositiveButton")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Yes"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" dialog"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" whichButton "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Delete it.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setNegativeButton")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"No"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" dialog"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" whichButton "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Do not delete it.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("show")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),a("p",[t._v("If the user deletes the ToDo item, take the user back to the "),a("code",[t._v("MainActivity")]),t._v(".")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("Runtime configuration changes not handled")]),t._v(" "),a("p",[t._v("The dialog in "),a("FigureNumber",{attrs:{previous:""}}),t._v(" above does not survive runtime configuration changes. For example, try showing the dialog and then rotate the screen. The dialog disappears since a runtime configuration change occurred, causing the activity to be destroyed and then re-created. Handled properly, the dialog should still be shown after the activity has been re-created, but handling that is not part of this lab.")],1)]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("Text overflow")]),t._v(" "),a("p",[t._v("What happens if you have a ToDo item with a very long text (or use a device with a very small screen) so all text can't be shown on the screen at once? Can you scroll to see the rest of it? Nope, not unless you use a "),a("a",{attrs:{href:"https://developer.android.com/reference/android/widget/ScrollView",target:"_blank",rel:"noopener noreferrer"}},[t._v("ScrollView"),a("OutboundLink")],1),t._v(" or similar. Using that is always a good idea when you display text that you are not sure will fit on all screens (i.e. in most cases).")])]),t._v(" "),a("h3",{attrs:{id:"updatetodoactivity"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#updatetodoactivity"}},[t._v("#")]),t._v(" UpdateToDoActivity")]),t._v(" "),a("p",[t._v("You should be able to figure out how to implement the "),a("code",[t._v("UpdateToDoActivity")]),t._v(" on your own. Good luck! 😀")]),t._v(" "),a("h2",{attrs:{id:"checklist"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#checklist"}},[t._v("#")]),t._v(" Checklist")]),t._v(" "),a("p",[t._v("Before you present your work to a teacher, make sure that:")]),t._v(" "),a("ul",[a("li",[t._v("At least two different languages are supported throughout the entire application.")]),t._v(" "),a("li",[t._v("You validate the user input when creating and updating a ToDo item and display descriptive error messages if something is invalid.")]),t._v(" "),a("li",[t._v("The back navigation always makes sense (especially after you have created, deleted or updated a ToDo item.")]),t._v(" "),a("li",[t._v("The data shown on the screen always is up to date (especially after you have created, deleted or updated a ToDo item).")]),t._v(" "),a("li",[t._v("The user always can properly use the GUI no matter how small screen the user has or how long texts the ToDo items contain.")]),t._v(" "),a("li",[t._v("You understand how all code in your application works.")])]),t._v(" "),a("h2",{attrs:{id:"present-your-work"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#present-your-work"}},[t._v("#")]),t._v(" Present your work")]),t._v(" "),a("p",[t._v("Present your work to a teacher at one of the lab sessions. You should be able to explain how all code in your application works, and the teacher will ask you some questions about it to verify this. If the teacher is satisfied with your presentation he will approve you on the Canvas assignment "),a("a",{attrs:{href:"https://ju.instructure.com/courses/3421/assignments/12889?module_item_id=75652",target:"_blank",rel:"noopener noreferrer"}},[t._v("The Lab"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"optional-exercises"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#optional-exercises"}},[t._v("#")]),t._v(" Optional exercises")]),t._v(" "),a("p",[t._v("These exercises are not part of the laboratory work. Feel free to complete them to practice on using various techniques/concepts used in Android applications before you apply them in your project work. If you get stuck you can always ask the teacher at a lab session for help. When you're done, feel free to discuss your solution with a teacher at a lab session to get some feedback on your work.")]),t._v(" "),a("h3",{attrs:{id:"handling-runtime-configuration-changes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#handling-runtime-configuration-changes"}},[t._v("#")]),t._v(" Handling runtime configuration changes")]),t._v(" "),a("p",[t._v("In the "),a("code",[t._v("ViewToDoActivity")]),t._v(", when the activity starts, create a new instance of "),a("a",{attrs:{href:"https://developer.android.com/reference/android/speech/tts/TextToSpeech",target:"_blank",rel:"noopener noreferrer"}},[t._v("TextToSpeech"),a("OutboundLink")],1),t._v(" and use it to speak out loud the title and the content of the ToDo item.")]),t._v(" "),a("p",[t._v("When the user rotates the screen, a runtime configuration change will take place, causing the activity to be destroyed and re-created. This should be transparent to the user, but if you don't write special code handling that, you will in the re-created activity create a new instance of "),a("code",[t._v("TextToSpeech")]),t._v(" again and tell it to speak out loud the title and the content of the ToDo item again. That should not happen.")]),t._v(" "),a("p",[t._v("And if the user chooses to leave the activity before your "),a("code",[t._v("TextToSpeech")]),t._v(" instance is done saying the entire title and content, you need to tell your "),a("code",[t._v("TextToSpeech")]),t._v(" instance to stop talking. As a result, your "),a("code",[t._v("TextToSpeech")]),t._v(" instance needs to survive configuration changes. This can be done using a model fragment (a fragment with no GUI and that has been set to retain it's instance) (old solution) or using a ViewModel (modern solution).")]),t._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[t._v("Think twice about the context")]),t._v(" "),a("p",[t._v("When creating a new instance of the "),a("code",[t._v("TextToSpeech")]),t._v(" class you need to pass it a context. Using the activity as the context works, but if the activity is destroyed and re-created, the destroyed activity can't be garbage collected since the "),a("code",[t._v("TextToSpeech")]),t._v(" instance holds a reference to it. Therefor (as in many other cases) it is better to pass it the context "),a("code",[t._v("anActivity.applicationContext")]),t._v(" instead.")])]),t._v(" "),a("p",[t._v("In the "),a("code",[t._v("ViewToDoActivity")]),t._v(" you can also try to handle runtime configuration changes so the delete dialog appears as it should when the activity is re-created. To make that happen you should use a "),a("a",{attrs:{href:"https://developer.android.com/reference/android/support/v4/app/DialogFragment.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("DialogFragment"),a("OutboundLink")],1),t._v(" to show the dialog.")]),t._v(" "),a("h3",{attrs:{id:"storing-data-in-a-database"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#storing-data-in-a-database"}},[t._v("#")]),t._v(" Storing data in a database")]),t._v(" "),a("p",[t._v("Store data in the built-in supported SQLite database. Either do it the old way using "),a("a",{attrs:{href:"https://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper",target:"_blank",rel:"noopener noreferrer"}},[t._v("SQLiteOpenHelper"),a("OutboundLink")],1),t._v(", or do it the more modern way using the "),a("a",{attrs:{href:"https://developer.android.com/topic/libraries/architecture/room",target:"_blank",rel:"noopener noreferrer"}},[t._v("Room Persistence Library"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[t._v("Think twice about the context")]),t._v(" "),a("p",[t._v("To work with the SQLite database you need to pass it a context. If your database communication object outlives your activity (e.g. if you use the singleton pattern), using the activity as the context is bad, since the activity can't be garbage collected when the user leaves it, so rather (as usual) use "),a("code",[t._v("anActivity.applicationContext")]),t._v(" as your context instead.")])]),t._v(" "),a("h3",{attrs:{id:"storing-data-in-firestore"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#storing-data-in-firestore"}},[t._v("#")]),t._v(" Storing data in Firestore")]),t._v(" "),a("p",[t._v("Store your data in "),a("a",{attrs:{href:"https://firebase.google.com/docs/firestore/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Firestore"),a("OutboundLink")],1),t._v(". Let the user create and login to a new account, and then store the ToDo items in Firestore. This way, it doesn't matter which device the user is using, she can access her ToDo items on all of them!")]),t._v(" "),a("h3",{attrs:{id:"using-a-recyclerview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-a-recyclerview"}},[t._v("#")]),t._v(" Using a RecyclerView")]),t._v(" "),a("p",[t._v("In "),a("code",[t._v("MainActivity")]),t._v(", instead of using a "),a("code",[t._v("ListView")]),t._v(" to display the title of all ToDo items, use a "),a("a",{attrs:{href:"https://developer.android.com/reference/android/support/v7/widget/RecyclerView",target:"_blank",rel:"noopener noreferrer"}},[t._v("RecyclerView"),a("OutboundLink")],1),t._v(". Allow the user to delete a ToDo item simply by swiping the title of the ToDo item to the side.")]),t._v(" "),a("h3",{attrs:{id:"using-notifications"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-notifications"}},[t._v("#")]),t._v(" Using Notifications")]),t._v(" "),a("p",[t._v("Add a timestamp to each ToDo item representing a deadline for when that ToDo item should be completed. Then use the "),a("a",{attrs:{href:"https://developer.android.com/reference/android/app/AlarmManager",target:"_blank",rel:"noopener noreferrer"}},[t._v("AlarmManager"),a("OutboundLink")],1),t._v(" to create an Intent that is broadcasted each day (e.g. at 09:00; can potentially be configured by the user through a "),a("code",[t._v("SettingsActivity")]),t._v("), and then create a "),a("a",{attrs:{href:"https://developer.android.com/reference/android/content/BroadcastReceiver",target:"_blank",rel:"noopener noreferrer"}},[t._v("BroadcastReceiver"),a("OutboundLink")],1),t._v(" listening for this Intent, and when your receiver receives the intent, "),a("a",{attrs:{href:"https://developer.android.com/guide/topics/ui/notifiers/notifications",target:"_blank",rel:"noopener noreferrer"}},[t._v("display a notification"),a("OutboundLink")],1),t._v(" to the user with information about which ToDo items that needs to be completed within 24 hours.")])],1)}),[],!1,null,null,null);e.default=o.exports}}]);